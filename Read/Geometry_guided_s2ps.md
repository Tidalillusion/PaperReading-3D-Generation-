# Geometry-Guided Street-View Panorama Synthesis from Satellite Imagery

## 创新点

1.提出了新的几何感知框架，通过建立卫星影像与街景影像的几何对应关系使生成器更加专注于学习场景依赖变化。
<br>
2.提出了一个无需监督的模块，该模块可以估计卫星影像高度图和街景对象可见性。
<br>
3.提出了一种新的机制，用于缓解视图图像对齐误差，不仅有助于获得干净的卫星到街景图像合成训练对，还可以识别两个相机中心位置偏移。

## 挑战与方法

### 困难

<p>&emsp;&emsp;1.视角差异导致Fov重叠度很低；<br>
&emsp;&emsp;2.成像方式差异明显，拍摄条件不同。<br>
&emsp;&emsp;3.卫星图像与街景图像映射不仅依赖内容还依赖几何角度。<br>
&emsp;&emsp;4.由于GPS drift，卫星影像与对应街景影像很难对齐。

### 实现方法

<p>&emsp;&emsp;1.利用数学几何关系建立卫星影像与街景之间的映射关系；<br>
&emsp;&emsp;2.S2SP模块估计高度信息，进行粗略街景全景图构建；<br>
&emsp;&emsp;3.利用生成器填充相关细节，进行全景图合成。

## 实验方法

### overview

<p>&emsp;&emsp;首先利用S2SP模块估计高度，然后利用卫星影像生成MPI；
<br>&emsp;&emsp;根据构建的几何映射关系进行视图转换，将卫星影像拉伸成为对应的街景影像；
<br>&emsp;&emsp;利用α合成进行粗略RGB合成，渲染得到粗略街景图；
<br>&emsp;&emsp;利用生成器对街景图进行细节填充。

### 卫星到街景的几何关系映射

<p>&emsp;&emsp;卫星影像坐标系->卫星相机坐标系（世界坐标系）->全景图

### 几何映射的具体做法

<p>&emsp;&emsp;1.卫星RGB影像输入到S2SP模块中，利用离散概率进行高度图估计；
<br>&emsp;&emsp;2.利用估计的高度图和输入的卫星影像建立MPI（一组平行的影像平面，相对于参考坐标系在不同深度中）；
<br>&emsp;&emsp;3.利用MPI进行光线投射，将MPI投影成街景图像并进行α融合合成粗略的街景图。

### 模型与损失

<p>&emsp;&emsp;S2SP模块与生成器组成。其中生成器backbone为Pix2Pix网络；S2SP为调整了通道数的S2SP网络。
<br>&emsp;&emsp;损失采用重建损失（L1损失与视知觉损失）与生成对抗损失。

### 影像对齐

<p>&emsp;&emsp;由于数据集限制，街景图与卫星图像并不是严格对齐的。利用之前几何映射模型，将卫星图上所有点
映射到街景图上，然后计算各个点映射方法的相似性，选择相似度最大的方法作为匹配方法。

## 实验设置

### 参数设置与数据集设置

<p>&emsp;&emsp;介绍了实验超参数设置与输入、输出影像的相关设置。
<br>&emsp;&emsp;数据集使用CVACT与CVUSA，前者进行了影像对齐，后者因为经过了数据集作者处理，未进行处理。

### 评估方法与基线

<p>&emsp;&emsp;评估方法包括：1.像素级别相似性度量指标；2.预训练的CNN进行
高级评估。

### 消融实验

<p>&emsp;&emsp;消融实验内容给包括：1.S2SP模块；2.高度估计模块；3.L1损失与视知觉损失对结果影响；4.MPI数量 5.是否对齐数据。
<br>&emsp;&emsp;结果均符合认知。

## 讨论与不足

### 讨论

<p>&emsp;&emsp;Unet的跳跃连接理论上可以帮助影像恢复细节，但对Baseline（视角差异过大导致的）与本文提出的模型影响较小（S2SP模块有助于提升重建质量，减小视角差异）。

### 局限

<p>&emsp;&emsp;无法很好进行建筑物立面生成（信息缺失）；渲染速度慢于之前的模型。










